<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>First Person Shooter - Shop System</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #111;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }

        canvas {
            display: block;
            margin: 0 auto;
        }

        #ui {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 1.5rem;
            text-align: center;
            z-index: 1000;
        }

        .button {
            background-color: #6c63ff;
            color: white;
            font-size: 1rem;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 20px;
        }

        .button:hover {
            background-color: #3f3d56;
        }

        #shop-ui {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #222;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            color: white;
        }

        .shop-item {
            margin: 10px 0;
            padding: 10px;
            background-color: #444;
            border-radius: 5px;
        }

        .shop-item button {
            background-color: #6c63ff;
            color: white;
            font-size: 1rem;
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .shop-item button:hover {
            background-color: #3f3d56;
        }
    </style>
</head>
<body>
    <div id="ui">
        <div id="score-ui">Score: <span id="score">0</span></div>
        <button class="button" id="openShopButton">Open Shop</button>
    </div>

    <div id="shop-ui">
        <h2>Shop</h2>
        <div class="shop-item" data-cost="5" data-color="red">
            <span>Red Gun Wrap - 5 Points</span>
            <button onclick="buyWrap(this)">Buy</button>
        </div>
        <div class="shop-item" data-cost="10" data-color="green">
            <span>Green Gun Wrap - 10 Points</span>
            <button onclick="buyWrap(this)">Buy</button>
        </div>
        <div class="shop-item" data-cost="15" data-color="gold">
            <span>Gold Gun Wrap - 15 Points</span>
            <button onclick="buyWrap(this)">Buy</button>
        </div>
        <button class="button" onclick="closeShop()">Close Shop</button>
    </div>

    <canvas id="fpsCanvas"></canvas>

    <script>
        const canvas = document.getElementById('fpsCanvas');
        const ctx = canvas.getContext('2d');
        const scoreDisplay = document.getElementById('score');
        const openShopButton = document.getElementById('openShopButton');
        const shopUI = document.getElementById('shop-ui');

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let player = {
            x: canvas.width / 2,
            y: canvas.height - 50,
            width: 20,
            height: 20,
            color: 'blue',
            speed: 5,
            wrap: 'blue'
        };

        let bullets = [];
        let enemies = [];
        let score = 0;
        let gameInterval;

        function drawPlayer() {
            ctx.fillStyle = player.wrap;
            ctx.fillRect(player.x, player.y, player.width, player.height);
        }

        function openShop() {
            shopUI.style.display = 'block';
        }

        function closeShop() {
            shopUI.style.display = 'none';
        }

        function buyWrap(button) {
            const item = button.parentElement;
            const cost = parseInt(item.getAttribute('data-cost'));
            const color = item.getAttribute('data-color');

            if (score >= cost) {
                score -= cost;
                scoreDisplay.textContent = score;
                player.wrap = color;
                alert(`Purchased ${color} Gun Wrap!`);
            } else {
                alert('Not enough points!');
            }
        }

        function drawBullets() {
            ctx.fillStyle = 'yellow';
            bullets.forEach((bullet, index) => {
                bullet.y -= bullet.speed;
                ctx.fillRect(bullet.x, bullet.y, bullet.width, bullet.height);
                if (bullet.y < 0) bullets.splice(index, 1);
            });
        }

        function drawEnemies() {
            ctx.fillStyle = 'red';
            enemies.forEach((enemy, index) => {
                enemy.y += enemy.speed;
                ctx.fillRect(enemy.x, enemy.y, enemy.width, enemy.height);

                if (enemy.y > canvas.height) {
                    enemies.splice(index, 1);
                }

                bullets.forEach((bullet, bIndex) => {
                    if (
                        bullet.x < enemy.x + enemy.width &&
                        bullet.x + bullet.width > enemy.x &&
                        bullet.y < enemy.y + enemy.height &&
                        bullet.height + bullet.y > enemy.y
                    ) {
                        enemies.splice(index, 1);
                        bullets.splice(bIndex, 1);
                        score++;
                        scoreDisplay.textContent = score;
                    }
                });
            });
        }

        function gameLoop() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawPlayer();
            drawBullets();
            drawEnemies();
        }

        openShopButton.addEventListener('click', openShop);

        window.addEventListener('mousemove', (e) => {
            player.x = e.clientX - player.width / 2;
        });

        window.addEventListener('click', () => {
            bullets.push({
                x: player.x + player.width / 2 - 2.5,
                y: player.y,
                width: 5,
                height: 10,
                speed: 5
            });
        });

        gameInterval = setInterval(gameLoop, 16);
    </script>
</body>
</html>
